<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shapes from Google Sheet</title>
    <script src="https://d3js.org/d3.v6.min.js"></script>
	<style>
        body {
            background-color: black;
            color: white;
            font-family: Arial, sans-serif;
            text-align: center;
        }
        h3 {
            color: #89CFF0;
            font-weight: bold;
            text-align: center;
        }
        footer {
            margin-top: 20px;
            text-align: center;
        }
        .image-logo img {
            margin-top: 10px;
    </style>
</head>
<body>

<h3>Creation Atlas Test</h3>
<p>by Daniele Fusetto</p>

    <svg width="500" height="500" id="canvas"></svg>

    <script>
        const URL = 'https://script.google.com/macros/s/AKfycbxh6ZgPlkj0TAJLr3GaxCtSmzw7L6NVZdUhRyJMBg9XrfRj9pi-4upx_gdfjZKQip45LQ/exec'; // Replace this with your web app URL

        const DATA = {}; // This can be empty or contain any data you want to send to the Google Apps Script

		// Fetch data from Google Apps Script
		fetch(URL, {
			redirect: "follow",
			method: "POST",
			body: JSON.stringify(DATA),
			headers: {
				"Content-Type": "text/plain;charset=utf-8",
			},
		})
		.then(response => response.json())
		.then(data => {
			drawShapes(data);
		})
		.catch(error => {
			console.error('Error:', error);
		});

		function drawShapes(dataArray) {
			const svg = d3.select("body")
						  .append("svg")
						  .attr("width", 800)
						  .attr("height", 600);

			dataArray.forEach(data => {
				switch(data.shape) {
					case 'circle':
						svg.append("circle")
						   .attr("cx", data.x)
						   .attr("cy", data.y)
						   .attr("r", data.size)
						   .attr("fill", "blue");

						if (data.text) {
							svg.append("text")
							   .attr("x", data.x)
							   .attr("y", data.y)
							   .attr("text-anchor", "middle")
							   .text(data.text);
						}
						break;

					case 'square':
						svg.append("rect")
						   .attr("x", data.x - data.size / 2)
						   .attr("y", data.y - data.size / 2)
						   .attr("width", data.size)
						   .attr("height", data.size)
						   .attr("fill", "red");

						if (data.text) {
							svg.append("text")
							   .attr("x", data.x)
							   .attr("y", data.y)
							   .attr("text-anchor", "middle")
							   .text(data.text);
						}
						break;
						
					// Add cases for other shapes as needed
				}
			});
		}

		</script>
	<!-- Footer -->
<footer>
    <div class="image-logo">
        <!-- Use local asset for logo -->
        <img src="assets/logo.png" alt="Primorden Logo" width="23%" height="auto">
    </div>
    <p>Chatchill | Version 1.0</p>
</footer>
</body>
</html>
